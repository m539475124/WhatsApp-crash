const {proto,delay,getContentType,areJidsSameUser,generateWAMessage}=require('@whiskeysockets/baileys'),chalk=require('chalk'),fs=require('fs'),Crypto=require('crypto'),axios=require('axios'),moment=require('moment-timezone'),{sizeFormatter}=require('human-readable'),util=require('util'),Jimp=require('jimp'),{defaultMaxListeners}=require('stream'),unixTimestampSeconds=(B=new Date())=>Math['floor'](B['getTime']()/0x3e8);exports['unixTimestampSeconds']=unixTimestampSeconds,exports['generateMessageTag']=B=>{let Y=(0x0,exports['unixTimestampSeconds'])()['toString']();if(B)Y+='.--'+B;return Y;},exports['processTime']=(B,Y)=>{return moment['duration'](Y-moment(B*0x3e8))['asSeconds']();},exports['getRandom']=B=>{return''+Math['floor'](Math['random']()*0x2710)+B;},exports['getBuffer']=async(B,Y)=>{try{Y?Y:{};const z=await axios({'method':'get','url':B,'headers':{'DNT':0x1,'Upgrade-Insecure-Request':0x1},...Y,'responseType':'arraybuffer'});return z['data'];}catch(w){return w;}},exports['fetchJson']=async(B,Y)=>{try{Y?Y:{};const z=await axios({'method':'GET','url':B,'headers':{'User-Agent':'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/95.0.4638.69\x20Safari/537.36'},...Y});return z['data'];}catch(w){return w;}},exports['runtime']=function(B){B=Number(B);var Y=Math['floor'](B/(0xe10*0x18)),z=Math['floor'](B%(0xe10*0x18)/0xe10),w=Math['floor'](B%0xe10/0x3c),L=Math['floor'](B%0x3c),D=Y>0x0?Y+(Y==0x1?'\x20day,\x20':'\x20days,\x20'):'',a=z>0x0?z+(z==0x1?'\x20hour,\x20':'\x20hours,\x20'):'',C=w>0x0?w+(w==0x1?'\x20minute,\x20':'\x20minutes,\x20'):'',g=L>0x0?L+(L==0x1?'\x20second':'\x20seconds'):'';return D+a+C+g;},exports['clockString']=B=>{let Y=isNaN(B)?'--':Math['floor'](B/0x36ee80),z=isNaN(B)?'--':Math['floor'](B/0xea60)%0x3c,w=isNaN(B)?'--':Math['floor'](B/0x3e8)%0x3c;return[Y,z,w]['map'](L=>L['toString']()['padStart'](0x2,0x0))['join'](':');},exports['sleep']=async B=>{return new Promise(Y=>setTimeout(Y,B));},exports['isUrl']=B=>{return B['match'](new RegExp(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/=]*)/,'gi'));},exports['getTime']=(B,Y)=>{return Y?moment(Y)['locale']('id')['format'](B):moment['tz']('Asia/Jakarta')['locale']('id')['format'](B);},exports['formatDate']=(B,Y='id')=>{let z=new Date(B);return z['toLocaleDateString'](Y,{'weekday':'long','day':'numeric','month':'long','year':'numeric','hour':'numeric','minute':'numeric','second':'numeric'});},exports['tanggal']=B=>{myMonths=['Januari','Februari','Maret','April','Mei','Juni','Juli','Agustus','September','Oktober','November','Desember'],myDays=['Minggu','Senin','Selasa','Rabu','Kamis','Jumâ€™at','Sabtu'];var Y=new Date(B),z=Y['getDate']();bulan=Y['getMonth']();var w=Y['getDay'](),w=myDays[w],L=Y['getYear'](),D=L<0x3e8?L+0x76c:L;const a=moment['tz']('Asia/Jakarta')['format']('DD/MM\x20HH:mm:ss');let C=new Date(),g='id',c=new Date(0x0)['getTime']()-new Date('1\x20January\x201970')['getTime'](),Q=['Pahing','Pon','Wage','Kliwon','Legi'][Math['floor']((C*0x1+c)/0x50ae4c0)%0x5];return w+',\x20'+z+'\x20-\x20'+myMonths[bulan]+'\x20-\x20'+D;},exports['formatp']=sizeFormatter({'std':'JEDEC','decimalPlaces':0x2,'keepTrailingZeroes':![],'render':(B,Y)=>B+'\x20'+Y+'B'}),exports['jsonformat']=B=>{return JSON['stringify'](B,null,0x2);};function format(...B){return util['format'](...B);}exports['logic']=(B,Y,z)=>{if(Y['length']!==z['length'])throw new Error('Input\x20and\x20Output\x20must\x20have\x20same\x20length');for(let w in Y)if(util['isDeepStrictEqual'](B,Y[w]))return z[w];return null;},exports['generateProfilePicture']=async B=>{const Y=await Jimp['read'](B),z=Y['getWidth'](),w=Y['getHeight'](),L=Y['crop'](0x0,0x0,z,w);return{'img':await L['scaleToFit'](0x2d0,0x2d0)['getBufferAsync'](Jimp['MIME_JPEG']),'preview':await L['scaleToFit'](0x2d0,0x2d0)['getBufferAsync'](Jimp['MIME_JPEG'])};},exports['bytesToSize']=(B,Y=0x2)=>{if(B===0x0)return'0\x20Bytes';const z=0x400,w=Y<0x0?0x0:Y,L=['Bytes','KB','MB','GB','TB','PB','EB','ZB','YB'],D=Math['floor'](Math['log'](B)/Math['log'](z));return parseFloat((B/Math['pow'](z,D))['toFixed'](w))+'\x20'+L[D];},exports['getSizeMedia']=B=>{return new Promise((Y,z)=>{if(/http/['test'](B))axios['get'](B)['then'](w=>{let L=parseInt(w['headers']['content-length']),D=exports['bytesToSize'](L,0x3);if(!isNaN(L))Y(D);});else{if(Buffer['isBuffer'](B)){let w=Buffer['byteLength'](B),L=exports['bytesToSize'](w,0x3);if(!isNaN(w))Y(L);}else z('error\x20gatau\x20apah');}});},exports['parseMention']=(B='')=>{return[...B['matchAll'](/@([0-9]{5,16}|0)/g)]['map'](Y=>Y[0x1]+'@s.whatsapp.net');},exports['getGroupAdm']=B=>{let Y=[];for(let z of B){z['admin']==='superadmin'?Y['push'](z['id']):z['admin']==='admin'?Y['push'](z['id']):'';}return Y||[];},exports['smsg']=(B,Y,z)=>{if(!Y)return Y;let w=proto['WebMessageInfo'];if(Y['key']){Y['id']=Y['key']['id'],Y['isBaileys']=Y['id']['startsWith']('BAE5')&&Y['id']['length']===0x10,Y['chat']=Y['key']['remoteJid'],Y['fromMe']=Y['key']['fromMe'],Y['isGroup']=Y['chat']['endsWith']('@g.us'),Y['sender']=B['decodeJid'](Y['fromMe']&&B['user']['id']||Y['participant']||Y['key']['participant']||Y['chat']||'');if(Y['isGroup'])Y['participant']=B['decodeJid'](Y['key']['participant'])||'';}if(Y['message']){Y['mtype']=getContentType(Y['message']),Y['msg']=Y['mtype']=='viewOnceMessage'?Y['message'][Y['mtype']]['message'][getContentType(Y['message'][Y['mtype']]['message'])]:Y['message'][Y['mtype']],Y['body']=Y['message']['conversation']||Y['msg']['caption']||Y['msg']['text']||Y['mtype']=='listResponseMessage'&&Y['msg']['singleSelectReply']['selectedRowId']||Y['mtype']=='buttonsResponseMessage'&&Y['msg']['selectedButtonId']||Y['mtype']=='viewOnceMessage'&&Y['msg']['caption']||Y['text'];let L=Y['quoted']=Y['msg']['contextInfo']?Y['msg']['contextInfo']['quotedMessage']:null;Y['mentionedJid']=Y['msg']['contextInfo']?Y['msg']['contextInfo']['mentionedJid']:[];if(Y['quoted']){let D=Object['keys'](Y['quoted'])[0x0];Y['quoted']=Y['quoted'][D];['productMessage']['includes'](D)&&(D=Object['keys'](Y['quoted'])[0x0],Y['quoted']=Y['quoted'][D]);if(typeof Y['quoted']==='string')Y['quoted']={'text':Y['quoted']};Y['quoted']['mtype']=D,Y['quoted']['id']=Y['msg']['contextInfo']['stanzaId'],Y['quoted']['chat']=Y['msg']['contextInfo']['remoteJid']||Y['chat'],Y['quoted']['isBaileys']=Y['quoted']['id']?Y['quoted']['id']['startsWith']('BAE5')&&Y['quoted']['id']['length']===0x10:![],Y['quoted']['sender']=B['decodeJid'](Y['msg']['contextInfo']['participant']),Y['quoted']['fromMe']=Y['quoted']['sender']===B['decodeJid'](B['user']['id']),Y['quoted']['text']=Y['quoted']['text']||Y['quoted']['caption']||Y['quoted']['conversation']||Y['quoted']['contentText']||Y['quoted']['selectedDisplayText']||Y['quoted']['title']||'',Y['quoted']['mentionedJid']=Y['msg']['contextInfo']?Y['msg']['contextInfo']['mentionedJid']:[],Y['getQuotedObj']=Y['getQuotedMessage']=async()=>{if(!Y['quoted']['id'])return![];let C=await z['loadMessage'](Y['chat'],Y['quoted']['id'],B);return exports['smsg'](B,C,z);};let a=Y['quoted']['fakeObj']=w['fromObject']({'key':{'remoteJid':Y['quoted']['chat'],'fromMe':Y['quoted']['fromMe'],'id':Y['quoted']['id']},'message':L,...Y['isGroup']?{'participant':Y['quoted']['sender']}:{}});Y['quoted']['delete']=()=>B['sendMessage'](Y['quoted']['chat'],{'delete':a['key']}),Y['quoted']['copyNForward']=(C,g=![],c={})=>B['copyNForward'](C,a,g,c),Y['quoted']['download']=()=>B['downloadMediaMessage'](Y['quoted']);}}if(Y['msg']['url'])Y['download']=()=>B['downloadMediaMessage'](Y['msg']);return Y['text']=Y['msg']['text']||Y['msg']['caption']||Y['message']['conversation']||Y['msg']['contentText']||Y['msg']['selectedDisplayText']||Y['msg']['title']||'',Y['reply']=(C,g=Y['chat'],c={})=>Buffer['isBuffer'](C)?B['sendMedia'](g,C,'file','',Y,{...c}):B['sendText'](g,C,Y,{...c}),Y['copy']=()=>exports['smsg'](B,w['fromObject'](w['toObject'](Y))),Y['copyNForward']=(C=Y['chat'],g=![],c={})=>B['copyNForward'](C,Y,g,c),B['appenTextMessage']=async(C,g)=>{let c=await generateWAMessage(Y['chat'],{'text':C,'mentions':Y['mentionedJid']},{'userJid':B['user']['id'],'quoted':Y['quoted']&&Y['quoted']['fakeObj']});c['key']['fromMe']=areJidsSameUser(Y['sender'],B['user']['id']),c['key']['id']=Y['key']['id'],c['pushName']=Y['pushName'];if(Y['isGroup'])c['participant']=Y['sender'];let Q={...g,'messages':[proto['WebMessageInfo']['fromObject'](c)],'type':'append'};B['ev']['emit']('messages.upsert',Q);},Y;};